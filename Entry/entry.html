<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Solana Fee Calculator</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
            rel="stylesheet"
        />
    </head>
    <body
        class="bg-gray-900 text-white font-inter min-h-screen flex items-center justify-center p-4"
    >
        <div class="bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-md">
            <h1 class="text-2xl font-bold mb-6 text-center text-blue-400">
                SOL-Fee For Entry
            </h1>

            <div class="space-y-4">
                <div class="flex items-center space-x-4 mb-4">
                    <label class="flex items-center">
                        <input
                            type="radio"
                            name="balanceType"
                            value="usd"
                            class="mr-2"
                            checked
                        />
                        USD
                    </label>
                    <label class="flex items-center">
                        <input
                            type="radio"
                            name="balanceType"
                            value="sol"
                            class="mr-2"
                        />
                        SOL
                    </label>
                </div>

                <div class="flex items-center space-x-2">
                    <input
                        type="number"
                        id="balanceInput"
                        placeholder="Enter balance"
                        class="flex-grow bg-gray-700 border border-gray-600 rounded-md p-2 text-white"
                    />
                    <button
                        id="refreshPriceBtn"
                        class="bg-blue-600 hover:bg-blue-700 p-2 rounded-md"
                    >
                        ðŸ”„
                    </button>
                </div>

                <div id="priceInfo" class="text-sm text-gray-400 text-center">
                    1 SOL = $<span id="solPrice">-</span>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2"
                        >Fee Level (SOL)</label
                    >
                    <div class="grid grid-cols-4 gap-2">
                        <button
                            data-fee="0.0005"
                            class="fee-btn bg-green-600 hover:bg-green-700 p-2 rounded-md w-full"
                        >
                            0.0005
                        </button>
                        <button
                            data-fee="0.001"
                            class="fee-btn bg-yellow-600 hover:bg-yellow-700 p-2 rounded-md w-full"
                        >
                            0.001
                        </button>
                        <button
                            data-fee="0.0015"
                            class="fee-btn bg-orange-600 hover:bg-orange-700 p-2 rounded-md w-full"
                        >
                            0.0015
                        </button>
                        <button
                            data-fee="0.01"
                            class="fee-btn bg-red-600 hover:bg-red-700 p-2 rounded-md w-full"
                        >
                            0.01
                        </button>
                    </div>

                    <div class="flex items-center justify-center mt-2">
                        <label class="flex items-center">
                            <input
                                type="checkbox"
                                id="feeMultiplierCheckbox"
                                class="mr-2"
                            />
                            <span class="text-sm">x2 Fee</span>
                        </label>
                    </div>
                </div>

                <button
                    id="calculateBtn"
                    class="w-full bg-blue-600 hover:bg-blue-700 p-3 rounded-md font-semibold mt-4"
                >
                    Calculate Remaining Balance
                </button>

                <div id="result" class="mt-4 text-center hidden">
                    <p class="text-lg">
                        Remaining Balance:
                        <span
                            id="remainingBalance"
                            class="font-bold text-green-400"
                        ></span>
                        SOL
                    </p>
                </div>
            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const balanceTypeRadios = document.querySelectorAll(
                    'input[name="balanceType"]'
                );
                const balanceInput = document.getElementById('balanceInput');
                const refreshPriceBtn =
                    document.getElementById('refreshPriceBtn');
                const solPriceSpan = document.getElementById('solPrice');
                const feeButtons = document.querySelectorAll('.fee-btn');
                const feeMultiplierCheckbox = document.getElementById(
                    'feeMultiplierCheckbox'
                );
                const calculateBtn = document.getElementById('calculateBtn');
                const resultDiv = document.getElementById('result');
                const remainingBalanceSpan =
                    document.getElementById('remainingBalance');

                let solPrice = 0;
                let selectedFee = 0;

                // Fetch SOL Price
                async function fetchSolPrice() {
                    try {
                        const response = await fetch(
                            'https://api.coingecko.com/api/v3/simple/price?ids=solana&vs_currencies=usd'
                        );
                        const data = await response.json();
                        solPrice = data.solana.usd;
                        solPriceSpan.textContent = solPrice.toFixed(2);
                    } catch (error) {
                        console.error('Price fetch error:', error);
                        solPriceSpan.textContent = 'Error';
                    }
                }

                // Initial price fetch
                fetchSolPrice();

                // Refresh Price
                refreshPriceBtn.addEventListener('click', fetchSolPrice);

                // Fee Selection
                feeButtons.forEach((button) => {
                    button.addEventListener('click', () => {
                        feeButtons.forEach((btn) =>
                            btn.classList.remove('ring-2', 'ring-white')
                        );
                        button.classList.add('ring-2', 'ring-white');
                        selectedFee = parseFloat(button.dataset.fee);
                    });
                });

                // Calculate Remaining Balance
                calculateBtn.addEventListener('click', () => {
                    const balanceType = document.querySelector(
                        'input[name="balanceType"]:checked'
                    ).value;
                    const balance = parseFloat(balanceInput.value);

                    if (isNaN(balance) || selectedFee === 0) {
                        alert('Please enter balance and select a fee');
                        return;
                    }

                    let balanceInSol =
                        balanceType === 'usd' ? balance / solPrice : balance;

                    const feeMultiplier = feeMultiplierCheckbox.checked ? 2 : 1;
                    const totalFee = selectedFee * feeMultiplier;
                    const remainingBalance = balanceInSol - totalFee;
                    remainingBalanceSpan.textContent =
                        remainingBalance.toFixed(4);
                    resultDiv.classList.remove('hidden');
                });
            });
        </script>
    </body>
</html>
